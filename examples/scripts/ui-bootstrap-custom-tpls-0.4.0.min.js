angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.datepicker"]),angular.module("ui.bootstrap.tpls",["template/datepicker/datepicker.html"]),angular.module("ui.bootstrap.datepicker",[]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20}).directive("datepicker",["dateFilter","$parse","datepickerConfig",function(a,b,c){return{restrict:"EA",replace:!0,scope:{model:"=ngModel",dateDisabled:"&"},templateUrl:"template/datepicker/datepicker.html",link:function(d,e,f){function g(a,b,c){d.rows=a,d.labels=b,d.title=c}function h(){d.showWeekNumbers="day"===d.mode&&l}function j(a,b){return"year"===d.mode?b.getFullYear()-a.getFullYear():"month"===d.mode?new Date(b.getFullYear(),b.getMonth())-new Date(a.getFullYear(),a.getMonth()):"day"===d.mode?new Date(b.getFullYear(),b.getMonth(),b.getDate())-new Date(a.getFullYear(),a.getMonth(),a.getDate()):void 0}function k(a){return m&&j(a,m)>0||n&&j(a,n)<0||d.dateDisabled&&d.dateDisabled({date:a,mode:d.mode})}d.mode="day";var l,m,n,o=new Date,p={};p.day=angular.isDefined(f.dayFormat)?d.$eval(f.dayFormat):c.dayFormat,p.month=angular.isDefined(f.monthFormat)?d.$eval(f.monthFormat):c.monthFormat,p.year=angular.isDefined(f.yearFormat)?d.$eval(f.yearFormat):c.yearFormat,p.dayHeader=angular.isDefined(f.dayHeaderFormat)?d.$eval(f.dayHeaderFormat):c.dayHeaderFormat,p.dayTitle=angular.isDefined(f.dayTitleFormat)?d.$eval(f.dayTitleFormat):c.dayTitleFormat,p.monthTitle=angular.isDefined(f.monthTitleFormat)?d.$eval(f.monthTitleFormat):c.monthTitleFormat;var q=angular.isDefined(f.startingDay)?d.$eval(f.startingDay):c.startingDay,r=angular.isDefined(f.yearRange)?d.$eval(f.yearRange):c.yearRange;f.showWeeks?d.$parent.$watch(b(f.showWeeks),function(a){l=!!a,h()}):(l=c.showWeeks,h()),f.min&&d.$parent.$watch(b(f.min),function(a){m=new Date(a),v()}),f.max&&d.$parent.$watch(b(f.max),function(a){n=new Date(a),v()});var s=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},t=function(a,b){return new Date(a,b+1,0).getDate()},u={day:function(){function b(b,d,f){for(var g=0;d>g;g++)c.push({date:new Date(b),isCurrent:f,isSelected:w(b),label:a(b,p.day),disabled:k(b)}),b.setDate(b.getDate()+1);e=b}var c=[],d=[],e=null,f=new Date(o);f.setDate(1);var h=q-f.getDay(),j=h>0?7-h:-h;for(j>0&&(f.setDate(-j+1),b(f,j,!1)),b(e||f,t(o.getFullYear(),o.getMonth()),!0),b(e,(7-c.length%7)%7,!1),i=0;7>i;i++)d.push(a(c[i].date,p.dayHeader));g(s(c,7),d,a(o,p.dayTitle))},month:function(){for(var b=[],c=0,d=o.getFullYear();12>c;){var e=new Date(d,c++,1);b.push({date:e,isCurrent:!0,isSelected:w(e),label:a(e,p.month),disabled:k(e)})}g(s(b,3),[],a(o,p.monthTitle))},year:function(){for(var b=[],c=parseInt((o.getFullYear()-1)/r,10)*r+1,d=0;r>d;d++){var e=new Date(c+d,0,1);b.push({date:e,isCurrent:!0,isSelected:w(e),label:a(e,p.year),disabled:k(e)})}var f=b[0].label+" - "+b[b.length-1].label;g(s(b,5),[],f)}},v=function(){u[d.mode]()},w=function(a){if(d.model&&d.model.getFullYear()===a.getFullYear()){if("year"===d.mode)return!0;if(d.model.getMonth()===a.getMonth())return"month"===d.mode||"day"===d.mode&&d.model.getDate()===a.getDate()}return!1};d.$watch("model",function(a,b){angular.isDate(a)&&(o=angular.copy(a)),angular.equals(a,b)||v()}),d.$watch("mode",function(){h(),v()}),d.select=function(a){o=new Date(a),"year"===d.mode?(d.mode="month",o.setFullYear(a.getFullYear())):"month"===d.mode?(d.mode="day",o.setMonth(a.getMonth())):"day"===d.mode&&(d.model=new Date(o))},d.move=function(a){"day"===d.mode?o.setMonth(o.getMonth()+a):"month"===d.mode?o.setFullYear(o.getFullYear()+a):"year"===d.mode&&o.setFullYear(o.getFullYear()+a*r),v()},d.toggleMode=function(){d.mode="day"===d.mode?"month":"month"===d.mode?"year":"day"},d.getWeekNumber=function(a){if("day"===d.mode&&d.showWeekNumbers&&7===a.length){var b=q>4?11-q:4-q,c=new Date(a[b].date);return c.setHours(0,0,0),Math.ceil(((c-new Date(c.getFullYear(),0,1))/864e5+1)/7)}}}}}]);